# Changelog

## [Unreleased](https://github.com/liquibase/liquibase-percona/tree/HEAD)

[Full Changelog](https://github.com/liquibase/liquibase-percona/compare/v4.11.0...HEAD)

**ðŸš€ Implemented enhancements:**

- Add version info to manifest [\#212](https://github.com/liquibase/liquibase-percona/pull/212) (@adangel)

**ðŸ“¦ Dependency updates:**

- Bump maven from 3.8.5 to 3.8.6 [\#220](https://github.com/liquibase/liquibase-percona/pull/220) (@adangel)
- Bump liquibase-core from 4.11.0 to 4.12.0 [\#219](https://github.com/liquibase/liquibase-percona/pull/219) (@dependabot[bot])
- Bump tomcat-jdbc from 10.0.21 to 10.0.22 [\#218](https://github.com/liquibase/liquibase-percona/pull/218) (@dependabot[bot])
- Bump docker-maven-plugin from 0.40.0 to 0.40.1 [\#217](https://github.com/liquibase/liquibase-percona/pull/217) (@dependabot[bot])
- Bump maven-enforcer-plugin from 3.0.0 to 3.1.0 [\#216](https://github.com/liquibase/liquibase-percona/pull/216) (@dependabot[bot])
- Bump maven-pmd-plugin from 3.16.0 to 3.17.0 [\#215](https://github.com/liquibase/liquibase-percona/pull/215) (@dependabot[bot])
- Bump docker-maven-plugin from 0.39.1 to 0.40.0 [\#214](https://github.com/liquibase/liquibase-percona/pull/214) (@dependabot[bot])
- Bump maven-invoker-plugin from 3.2.2 to 3.3.0 [\#213](https://github.com/liquibase/liquibase-percona/pull/213) (@dependabot[bot])

## [v4.11.0](https://github.com/liquibase/liquibase-percona/tree/v4.11.0) (2022-05-27)

[Full Changelog](https://github.com/liquibase/liquibase-percona/compare/v4.10.0...v4.11.0)

* Support for Liquibase 4.11.0

**ðŸ“¦ Dependency updates:**

- Bump spotbugs-maven-plugin from 4.6.0.0 to 4.7.0.0 [\#208](https://github.com/liquibase/liquibase-percona/pull/208) (@dependabot[bot])
- Bump liquibase-core from 4.10.0 to 4.11.0 [\#209](https://github.com/liquibase/liquibase-percona/pull/209) (@dependabot[bot])
- Bump mariadb-java-client from 3.0.4 to 3.0.5 [\#210](https://github.com/liquibase/liquibase-percona/pull/210) (@dependabot[bot])


**ðŸ“¦ Dependency updates:**

- Bump tomcat-jdbc from 10.0.20 to 10.0.21 [\#207](https://github.com/liquibase/liquibase-percona/pull/207) (@dependabot[bot])

## [v4.10.0](https://github.com/liquibase/liquibase-percona/tree/v4.10.0) (2022-05-06)

[Full Changelog](https://github.com/liquibase/liquibase-percona/compare/liquibase-percona-4.9.1...v4.10.0)

* Support for Liquibase 4.10.0

**ðŸš€ Implemented enhancements:**

- Use github\_changelog\_generator [\#205](https://github.com/liquibase/liquibase-percona/pull/205) (@adangel)

**ðŸ“¦ Dependency updates:**

- Bump liquibase-core from 4.9.1 to 4.10.0 [\#204](https://github.com/liquibase/liquibase-percona/pull/204) (@dependabot[bot])
- Bump mysql-connector-java from 8.0.28 to 8.0.29 [\#203](https://github.com/liquibase/liquibase-percona/pull/203) (@dependabot[bot])
- Bump nexus-staging-maven-plugin from 1.6.12 to 1.6.13 [\#202](https://github.com/liquibase/liquibase-percona/pull/202) (@dependabot[bot])
- Bump maven-javadoc-plugin from 3.3.2 to 3.4.0 [\#201](https://github.com/liquibase/liquibase-percona/pull/201) (@dependabot[bot])
- Bump tomcat-jdbc from 10.0.18 to 10.0.20 [\#200](https://github.com/liquibase/liquibase-percona/pull/200) (@dependabot[bot])

## Version 4.9.1 (2022-03-31)

*   Support for Liquibase 4.9.1.
*   [PR #180](https://github.com/liquibase/liquibase-percona/pull/180): Added support for [MariaDB Connector 3.x](https://mariadb.com/kb/en/about-mariadb-connector-j/).

## Version 4.9.0 (2022-03-18)

*   Support for Liquibase 4.9.0.

## Version 4.8.0 (2022-02-24)

*   Support for Liquibase 4.8.0.
*   [PR #182](https://github.com/liquibase/liquibase-percona/pull/182): Added masking for slave password - [andreiMambu](https://github.com/andreiMambu)
*   [#183](https://github.com/liquibase/liquibase-percona/issues/183): The parameter --slave-password is not masked in logs

## Version 4.7.1 (2022-01-27)

*   Support for Liquibase 4.7.1.

## Version 4.7.0 (2022-01-13)

*   Support for Liquibase 4.7.0.

## Version 4.6.2 (2021-12-02)

*   Support for Liquibase 4.6.2.

## Version 4.6.1.1 (2021-11-19)

*   [#148](https://github.com/liquibase/liquibase-percona/issues/148): Support createIndex with specifying index prefix length

## Version 4.6.1 (2021-11-06)

*   Support for Liquibase 4.6.1.

## Version 4.5.0 (2021-10-04)

*   Support for Liquibase 4.5.0.

## Version 4.4.3 (2021-08-12)

*   Support for Liquibase 4.4.3.

## Version 4.4.2 (2021-07-23)

*   Support for Liquibase 4.4.2.

## Version 4.4.1 (2021-07-18)

*   Support for Liquibase 4.4.1.

*   [#122](https://github.com/liquibase/liquibase-percona/pull/122): Add docker image with liquibase, liquibase-percona and percona toolkit

## Version 4.4.0 (2021-06-20)

*  Support for Liquibase 4.4.0.

*   [PR #112](https://github.com/liquibase/liquibase-percona/pull/112): Fixing typos - [Jasper Vandemalle](https://github.com/jasper-vandemalle)
*   [#106](https://github.com/liquibase/liquibase-percona/issues/106): MySQL connection times out after pt-online-schema-change run
*   [#118](https://github.com/liquibase/liquibase-percona/pull/118): Use catalogName instead of schemaName

## Version 4.3.5 (2021-05-24)

*  Support for Liquibase 4.3.5.

## Version 4.3.4 (2021-04-28)

*  Support for Liquibase 4.3.4.

## Version 4.3.3 (2021-04-13)

*  Support for Liquibase 4.3.3.

## Version 4.3.2 (2021-03-26)

*   [#60](https://github.com/liquibase/liquibase-percona/issues/60): Add support for MariaDB JConnector
*   [#85](https://github.com/liquibase/liquibase-percona/issues/85): liquibase-percona 4.3.1 is not reproducible anymore
*   [#88](https://github.com/liquibase/liquibase-percona/pull/88): Support for Liquibase 4.3.2

## Version 4.3.1 (2021-02-23)

*   The maven coordinates have changed. This extension is now available like the other liquibase extensions in
    the group `org.liquibase.ext`.

    In order to add this extension, use the following snippet:

        <dependency>
            <groupId>org.liquibase.ext</groupId>
            <artifactId>liquibase-percona</artifactId>
            <version>4.3.1</version>
        </dependency>


*   [#66](https://github.com/liquibase/liquibase-percona/issues/66): Change maven coordinates to be org.liquibase.ext
*   [#74](https://github.com/liquibase/liquibase-percona/pull/74): Update Liquibase to 4.3.0
*   Support for Liquibase 4.3.1
*   Alignment with existing release process

## Version 2.0.0 (2021-02-04)

*   The minimum Java runtime version is now Java 1.8.
*   Liquibase 4+ is supported.
*   Support for older liquibase versions has been dropped.
*   The XML namespace for this extension is now "http://www.liquibase.org/xml/ns/dbchangelog-ext/liquibase-percona".

    This only is affecting you, if you use the [UsePercona flag](README.md#usepercona-flag).

    There is now also a XSD schema available, if you want to validate your XML changeset:
    <https://raw.githubusercontent.com/liquibase/liquibase-percona/liquibase-percona-2.0.0/src/main/resources/dbchangelog-ext-liquibase-percona.xsd>

    See the file [test-changelog.xml](https://github.com/liquibase/liquibase-percona/blob/master/src/test/resources/liquibase/ext/percona/changelog/test-changelog.xml) for an example.

    Note: Usage of the schema is optional. In order to use the custom flags provided by this extension, you
    only need to declare the namespace.
*   The checksum calculation for changes that used [UsePercona flag](README.md#usepercona-flag) changed. You might
    need to recreate the changelog entries for these changes with the
    [clearCheckSums](https://docs.liquibase.com/commands/community/clearchecksums.html) command.
    See [#64](https://github.com/liquibase/liquibase-percona/issues/64) for the explanation.

*   Fixed [#56](https://github.com/liquibase/liquibase-percona/issues/56): Support liquibase 4.x
*   Fixed [#57](https://github.com/liquibase/liquibase-percona/issues/57): Support perconaOptions per change
*   Fixed [#64](https://github.com/liquibase/liquibase-percona/issues/64): Different changeset checksums with and without liquibase-percona
*   Fixed [#65](https://github.com/liquibase/liquibase-percona/issues/65): Make build reproducible

## Version 1.7.1 (2021-01-28)

*   Fixed [#58](https://github.com/liquibase/liquibase-percona/pull/58): Update versions (liquibase, percona-toolkit, mysql)

## Version 1.7.0 (2020-07-04)

*   Fixed [#35](https://github.com/liquibase/liquibase-percona/issues/35): Add support for AddPrimaryKeyChange
*   Fixed [#37](https://github.com/liquibase/liquibase-percona/issues/37): Using quotes for liquibase.percona.options doesn't always work
*   Fixed [#53](https://github.com/liquibase/liquibase-percona/issues/53): Update to support latest liquibase 3.10.1
*   Fixed [#54](https://github.com/liquibase/liquibase-percona/issues/54): Update mysql-connector-java to 8.0.20
*   Fixed [#55](https://github.com/liquibase/liquibase-percona/issues/55): Update percona toolkit to 3.2.0

## Version 1.6.0 (2019-04-20)

The minimum Java runtime version is now Java 1.7.

The system property `liquibase.percona.options` uses now a default value of `--alter-foreign-keys-method=auto --nocheck-unique-key-change`.
These two options are **not** added by default anymore when pt-osc is executed. They are added
now via the additional options system property. In case you have overridden this system property, make sure, to add
these options as well, if you need them.

*   Fixed [#29](https://github.com/liquibase/liquibase-percona/issues/29): Allow to override --nocheck-unique-key-changes and --alter-foreign-keys-method=auto
*   Fixed [#30](https://github.com/liquibase/liquibase-percona/issues/30): Update liquibase

## Version 1.5.2 (2019-04-14)

*   Fixed [#28](https://github.com/liquibase/liquibase-percona/issues/28): Strange behavior when liquibase.percona.defaultOn is false

## Version 1.5.1 (2018-11-10)

*   Fixed [#26](https://github.com/liquibase/liquibase-percona/issues/26): Stack Overflow using defaultOn=false System Property
*   [PR #27](https://github.com/liquibase/liquibase-percona/pull/27): fix a typo - [kennethinsnow](https://github.com/kennethinsnow)

## Version 1.5.0 (2018-09-30)

`pt-online-schema-change` is executed now with the option `--nocheck-unique-key-change`.
This enables to add unique indexes, but can cause data loss, since duplicated rows are ignored.
See [Percona Toolkit Documentation](https://www.percona.com/doc/percona-toolkit/LATEST/pt-online-schema-change.html#id7)
for more information.

The plugin is only compatible with version 3.0.12 or later of Percona Toolkit.

*   Upgraded liquibase to 3.5.5
*   Verified compatibility to liquibase 3.6.2
*   Fixed [#14](https://github.com/liquibase/liquibase-percona/issues/14): Rollback of foreign key constraint changing constraint names problem
*   Fixed [#15](https://github.com/liquibase/liquibase-percona/issues/15): Unique key constraint cannot be added
*   Fixed [#20](https://github.com/liquibase/liquibase-percona/issues/20): Support "UsePercona flag" in XML changelogs
*   Fixed [#22](https://github.com/liquibase/liquibase-percona/issues/22): Cross database bug

## Version 1.4.1 (2018-09-27)

*   Fixed [#16](https://github.com/liquibase/liquibase-percona/issues/16): Failing test PerconaAddForeignKeyConstraintChangeTest
*   Fixed [#17](https://github.com/liquibase/liquibase-percona/issues/17): Include Percona Toolkit into integration test
*   Fixed [#18](https://github.com/liquibase/liquibase-percona/issues/18): Use spotbugs instead of findbugs
*   Fixed [#19](https://github.com/liquibase/liquibase-percona/issues/19): Upgrade liquibase to 3.5.4
*   Fixed [#21](https://github.com/liquibase/liquibase-percona/issues/21): Couldn't determine password: JdbcConnection is unsupported: dbcp.PoolingDataSource$PoolGuardConnectionWrapper
*   Fixed [#23](https://github.com/liquibase/liquibase-percona/pull/23): Add support for dbcp2
*   Added new system property `liquibase.percona.path` to specify the path where Percona Toolkit is installed.

## Version 1.4.0 (2017-07-21)

*   Fixed [#13](https://github.com/liquibase/liquibase-percona/issues/13): Use default liquibase.properties as fallback

## Version 1.3.1 (2017-07-21)

*   Fixed [#12](https://github.com/liquibase/liquibase-percona/issues/12): Cannot run migrations with the percona extension on a Spring Boot app with embedded Tomcat

## Version 1.3.0 (2016-12-18)

*   Upgraded liquibase to 3.5.3
*   Support for MySQL Connector 6.0.x in addition to 5.1.x.
*   Fixed [#7](https://github.com/liquibase/liquibase-percona/issues/7): Foreign key constraints of AddColumn is ignored
*   Fixed [#8](https://github.com/liquibase/liquibase-percona/issues/8): Support addForeignKeyConstraintChange, addUniqueConstraintChange
*   Fixed [#9](https://github.com/liquibase/liquibase-percona/issues/9): Support for enabling pt-online-schema-changes on a per-change basis
*   Fixed [#10](https://github.com/liquibase/liquibase-percona/issues/10): Build fails with java7: UnsupportedClassVersion when running DatabaseConnectionUtilTest.testGetPasswordMySQL\_6

## Version 1.2.1 (2016-09-13)

*   [PR #4](https://github.com/liquibase/liquibase-percona/pull/4): Allow passing additional command line options to pt-online-schema-change
*   [PR #5](https://github.com/liquibase/liquibase-percona/pull/5): Support afterColumn attribute

## Version 1.2.0 (2016-04-02)

*   Fixed [#2](https://github.com/liquibase/liquibase-percona/issues/2): Adding indexes via pt-online-schema-change
*   Fixed [#3](https://github.com/liquibase/liquibase-percona/issues/3): Altering column data types via pt-online-schema-change
*   Added configuration property "liquibase.percona.skipChanges"
*   Upgraded liquibase to 3.4.2

## Version 1.1.1 (2015-07-26)

*   Fixed [#1](https://github.com/liquibase/liquibase-percona/issues/1): Tables with foreign keys

## Version 1.1.0 (2014-11-06)

*   Initial version compatible with liquibase 3.3.0

## Version 1.0.0 (2014-10-09)

*   Initial version compatible with liquibase 3.2.0


\* *This Changelog was automatically generated by [github_changelog_generator](https://github.com/github-changelog-generator/github-changelog-generator)*
